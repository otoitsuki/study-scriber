"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./hooks/use-app-state-new.ts":
/*!************************************!*\
  !*** ./hooks/use-app-state-new.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAppStateNew: () => (/* binding */ useAppStateNew)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/.pnpm/next@15.2.4_@babel+core@7.27.4_@playwright+test@1.53.1_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _use_app_state_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./use-app-state-context */ \"(app-pages-browser)/./hooks/use-app-state-context.ts\");\n/* harmony import */ var _use_session_adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./use-session-adapter */ \"(app-pages-browser)/./hooks/use-session-adapter.ts\");\n/* harmony import */ var _use_recording_adapter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./use-recording-adapter */ \"(app-pages-browser)/./hooks/use-recording-adapter.ts\");\n/* harmony import */ var _use_notes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./use-notes */ \"(app-pages-browser)/./hooks/use-notes.ts\");\n/* harmony import */ var _use_transcript_adapter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./use-transcript-adapter */ \"(app-pages-browser)/./hooks/use-transcript-adapter.ts\");\n/* harmony import */ var _components_ui_use_toast__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/use-toast */ \"(app-pages-browser)/./components/ui/use-toast.ts\");\n/* harmony import */ var _lib_state_machine__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../lib/state-machine */ \"(app-pages-browser)/./lib/state-machine.ts\");\n/* __next_internal_client_entry_do_not_use__ useAppStateNew auto */ \n\n\n\n\n\n\n\n/**\n * 新版本的 useAppState Hook\n * 使用 Context 狀態管理，大幅簡化原本 868 行的複雜邏輯\n * 將狀態管理委託給 AppStateContext，Hook 只負責業務邏輯\n */ function useAppStateNew() {\n    var _appData_session;\n    const context = (0,_use_app_state_context__WEBPACK_IMPORTED_MODULE_1__.useAppStateContext)();\n    const { appData, isLoading, error, dispatch, transition } = context;\n    const session = (0,_use_session_adapter__WEBPACK_IMPORTED_MODULE_2__.useSession)();\n    const recording = (0,_use_recording_adapter__WEBPACK_IMPORTED_MODULE_3__.useRecording)();\n    const notes = (0,_use_notes__WEBPACK_IMPORTED_MODULE_4__.useNotes)();\n    const transcript = (0,_use_transcript_adapter__WEBPACK_IMPORTED_MODULE_5__.useTranscript)();\n    const { toast } = (0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_6__.useToast)();\n    console.log('🔄 [useAppStateNew] Hook 初始化:', {\n        currentState: appData.state,\n        isRecording: appData.isRecording,\n        sessionId: (_appData_session = appData.session) === null || _appData_session === void 0 ? void 0 : _appData_session.id,\n        transcriptCount: appData.transcriptEntries.length\n    });\n    const [stateMachineManager] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        \"useAppStateNew.useState\": ()=>{\n            const smManager = new _lib_state_machine__WEBPACK_IMPORTED_MODULE_7__.StateMachineManager({\n                currentState: appData.state,\n                isRecording: appData.isRecording,\n                transcriptCount: appData.transcriptEntries.length,\n                session: appData.session || null,\n                error: error\n            });\n            // 立即註冊副作用處理器\n            smManager.registerSideEffectHandler('CREATE_SESSION', {\n                handleSideEffect: {\n                    \"useAppStateNew.useState\": async (effect)=>{\n                        console.log('🏗️ [副作用] CREATE_SESSION: 建立會話', effect);\n                        // 這裡需要傳入標題，我們可以從某個地方獲取或使用預設值\n                        const title = 'New Recording'; // 預設標題，之後可以改進\n                        const newSession = await session.createRecordingSession(title, appData.editorContent);\n                        if (newSession) {\n                            dispatch({\n                                type: 'SET_SESSION',\n                                payload: newSession\n                            });\n                            // 更新狀態機上下文\n                            smManager.getStateMachine().updateContext({\n                                currentState: appData.state,\n                                isRecording: appData.isRecording,\n                                transcriptCount: appData.transcriptEntries.length,\n                                session: newSession,\n                                error: error\n                            });\n                            localStorage.removeItem('draft_note');\n                        } else {\n                            throw new Error('無法建立錄音會話');\n                        }\n                    }\n                }[\"useAppStateNew.useState\"]\n            });\n            smManager.registerSideEffectHandler('START_RECORDING', {\n                handleSideEffect: {\n                    \"useAppStateNew.useState\": async ()=>{\n                        var _context_session;\n                        // 從狀態機上下文獲取最新的 session 資訊\n                        const context = smManager.getStateMachine().getContext();\n                        if ((_context_session = context.session) === null || _context_session === void 0 ? void 0 : _context_session.id) {\n                            console.log('🎤 [副作用] START_RECORDING: 開始錄音', context.session.id);\n                            await recording.startRecording(context.session.id);\n                        } else {\n                            console.error('🎤 [副作用] START_RECORDING: 沒有可用的 session');\n                        }\n                    }\n                }[\"useAppStateNew.useState\"]\n            });\n            smManager.registerSideEffectHandler('STOP_RECORDING', {\n                handleSideEffect: {\n                    \"useAppStateNew.useState\": async ()=>{\n                        await stopRecording();\n                    }\n                }[\"useAppStateNew.useState\"]\n            });\n            smManager.registerSideEffectHandler('CONNECT_WEBSOCKET', {\n                handleSideEffect: {\n                    \"useAppStateNew.useState\": async ()=>{\n                        var _context_session;\n                        // 從狀態機上下文獲取最新的 session 資訊\n                        const context = smManager.getStateMachine().getContext();\n                        if ((_context_session = context.session) === null || _context_session === void 0 ? void 0 : _context_session.id) {\n                            console.log('🔌 [副作用] CONNECT_WEBSOCKET: 連接 WebSocket', context.session.id);\n                            await transcript.connect(context.session.id);\n                        } else {\n                            console.error('🔌 [副作用] CONNECT_WEBSOCKET: 沒有可用的 session');\n                        }\n                    }\n                }[\"useAppStateNew.useState\"]\n            });\n            smManager.registerSideEffectHandler('DISCONNECT_WEBSOCKET', {\n                handleSideEffect: {\n                    \"useAppStateNew.useState\": ()=>{\n                        transcript.disconnect();\n                    }\n                }[\"useAppStateNew.useState\"]\n            });\n            smManager.registerSideEffectHandler('FINISH_SESSION', {\n                handleSideEffect: {\n                    \"useAppStateNew.useState\": async ()=>{\n                        await finishSession();\n                    }\n                }[\"useAppStateNew.useState\"]\n            });\n            return smManager;\n        }\n    }[\"useAppStateNew.useState\"]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAppStateNew.useEffect\": ()=>{\n            stateMachineManager.getStateMachine().updateContext({\n                currentState: appData.state,\n                isRecording: appData.isRecording,\n                transcriptCount: appData.transcriptEntries.length,\n                session: appData.session,\n                error: error\n            });\n        }\n    }[\"useAppStateNew.useEffect\"], [\n        appData,\n        error,\n        stateMachineManager\n    ]);\n    // 建立純筆記會話\n    const createNoteSession = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAppStateNew.useCallback[createNoteSession]\": async (title)=>{\n            dispatch({\n                type: 'SET_LOADING',\n                payload: true\n            });\n            dispatch({\n                type: 'CLEAR_ERROR'\n            });\n            try {\n                const newSession = await session.createNoteSession(title);\n                if (newSession) {\n                    dispatch({\n                        type: 'SET_SESSION',\n                        payload: newSession\n                    });\n                    // 載入筆記內容\n                    await notes.loadNote(newSession.id);\n                    // 清除本地草稿\n                    localStorage.removeItem('draft_note');\n                    console.log('✅ [useAppStateNew] 純筆記會話建立成功');\n                    toast({\n                        title: '筆記會話已建立',\n                        description: '會話 \"'.concat(title, '\" 建立成功')\n                    });\n                }\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : '建立筆記會話失敗';\n                dispatch({\n                    type: 'SET_ERROR',\n                    payload: errorMessage\n                });\n                console.error('❌ [useAppStateNew] 建立筆記會話失敗:', err);\n                toast({\n                    title: '建立失敗',\n                    description: errorMessage,\n                    variant: 'destructive'\n                });\n            } finally{\n                dispatch({\n                    type: 'SET_LOADING',\n                    payload: false\n                });\n            }\n        }\n    }[\"useAppStateNew.useCallback[createNoteSession]\"], [\n        session,\n        notes,\n        toast,\n        dispatch\n    ]);\n    // 建立錄音會話\n    const createRecordingSession = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAppStateNew.useCallback[createRecordingSession]\": async (title)=>{\n            dispatch({\n                type: 'SET_LOADING',\n                payload: true\n            });\n            dispatch({\n                type: 'CLEAR_ERROR'\n            });\n            try {\n                const newSession = await session.createRecordingSession(title, appData.editorContent);\n                if (newSession) {\n                    dispatch({\n                        type: 'SET_SESSION',\n                        payload: newSession\n                    });\n                    // 載入筆記內容\n                    await notes.loadNote(newSession.id);\n                    // 清除本地草稿\n                    localStorage.removeItem('draft_note');\n                    console.log('✅ [useAppStateNew] 錄音會話建立成功');\n                    toast({\n                        title: '錄音會話已建立',\n                        description: '會話 \"'.concat(title, '\" 建立成功')\n                    });\n                }\n            } catch (err) {\n                // 特別處理會話衝突錯誤\n                if (err instanceof Error && err.message.includes('檢測到活躍會話衝突')) {\n                    const conflictMsg = '偵測到會話衝突，請重新整理頁面後再試';\n                    dispatch({\n                        type: 'SET_ERROR',\n                        payload: conflictMsg\n                    });\n                    toast({\n                        title: '會話衝突',\n                        description: '目前已有活躍會話，請重新整理頁面後再試，或等待當前會話結束',\n                        variant: 'destructive'\n                    });\n                    return;\n                }\n                const errorMessage = err instanceof Error ? err.message : '建立錄音會話失敗';\n                dispatch({\n                    type: 'SET_ERROR',\n                    payload: errorMessage\n                });\n                console.error('❌ [useAppStateNew] 建立錄音會話失敗:', err);\n                toast({\n                    title: '建立失敗',\n                    description: errorMessage,\n                    variant: 'destructive'\n                });\n            } finally{\n                dispatch({\n                    type: 'SET_LOADING',\n                    payload: false\n                });\n            }\n        }\n    }[\"useAppStateNew.useCallback[createRecordingSession]\"], [\n        session,\n        notes,\n        toast,\n        dispatch,\n        appData.editorContent\n    ]);\n    // 開始錄音\n    const startRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAppStateNew.useCallback[startRecording]\": async (title)=>{\n            console.log(\"🎤 [useAppStateNew] startRecording: 流程開始\");\n            dispatch({\n                type: 'SET_LOADING',\n                payload: true\n            });\n            try {\n                var _session_currentSession;\n                // 檢查活躍會話狀態\n                const latestActiveSession = await session.checkActiveSession();\n                let sessionToRecord = latestActiveSession || session.currentSession;\n                console.log(\"🎤 [useAppStateNew] 會話狀態檢查:\", {\n                    latestActiveSession: latestActiveSession === null || latestActiveSession === void 0 ? void 0 : latestActiveSession.id,\n                    currentSession: (_session_currentSession = session.currentSession) === null || _session_currentSession === void 0 ? void 0 : _session_currentSession.id,\n                    finalSessionToUse: sessionToRecord === null || sessionToRecord === void 0 ? void 0 : sessionToRecord.id\n                });\n                if (!sessionToRecord) {\n                    console.log(\"🎤 [useAppStateNew] 建立新的錄音 session\");\n                    const newSession = await session.createRecordingSession(title, appData.editorContent);\n                    if (!newSession) {\n                        throw new Error('無法建立新的錄音會話');\n                    }\n                    sessionToRecord = newSession;\n                    dispatch({\n                        type: 'SET_SESSION',\n                        payload: newSession\n                    });\n                    localStorage.removeItem('draft_note');\n                } else if (sessionToRecord.type === 'note_only') {\n                    console.log(\"🎤 [useAppStateNew] 升級 note_only session\");\n                    const upgradedSession = await session.upgradeToRecording();\n                    if (!upgradedSession) {\n                        throw new Error('無法升級會話');\n                    }\n                    sessionToRecord = upgradedSession;\n                    dispatch({\n                        type: 'SET_SESSION',\n                        payload: upgradedSession\n                    });\n                }\n                // 更新狀態機上下文，確保 session 資訊是最新的\n                stateMachineManager.getStateMachine().updateContext({\n                    currentState: appData.state,\n                    isRecording: appData.isRecording,\n                    transcriptCount: appData.transcriptEntries.length,\n                    session: sessionToRecord,\n                    error: error\n                });\n                // 觸發狀態轉換 - 讓狀態機處理錄音和 WebSocket 連接\n                const result = transition('USER_START_RECORDING');\n                if (!(result === null || result === void 0 ? void 0 : result.success)) {\n                    throw new Error((result === null || result === void 0 ? void 0 : result.error) || '狀態轉換失敗');\n                }\n                console.log(\"🎤 [useAppStateNew] 錄音開始成功\");\n                toast({\n                    title: '錄音開始'\n                });\n            } catch (err) {\n                // 處理會話衝突錯誤\n                if (err instanceof Error && err.message.includes('檢測到活躍會話衝突')) {\n                    const conflictMsg = '偵測到會話衝突，請重新整理頁面後再試';\n                    dispatch({\n                        type: 'SET_ERROR',\n                        payload: conflictMsg\n                    });\n                    toast({\n                        title: '會話衝突',\n                        description: '目前已有活躍會話，請重新整理頁面後再試，或等待當前會話結束',\n                        variant: 'destructive'\n                    });\n                    return;\n                }\n                const msg = err instanceof Error ? err.message : '開始錄音失敗';\n                dispatch({\n                    type: 'SET_ERROR',\n                    payload: msg\n                });\n                console.error(\"🎤 [useAppStateNew] 錄音失敗:\", msg);\n                toast({\n                    title: '錄音失敗',\n                    description: msg,\n                    variant: 'destructive'\n                });\n            } finally{\n                dispatch({\n                    type: 'SET_LOADING',\n                    payload: false\n                });\n            }\n        }\n    }[\"useAppStateNew.useCallback[startRecording]\"], [\n        session,\n        recording,\n        toast,\n        dispatch,\n        appData.editorContent,\n        transition,\n        stateMachineManager,\n        appData.state,\n        appData.isRecording,\n        appData.transcriptEntries,\n        error\n    ]);\n    // 升級會話為錄音模式\n    const upgradeToRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAppStateNew.useCallback[upgradeToRecording]\": async ()=>{\n            dispatch({\n                type: 'SET_LOADING',\n                payload: true\n            });\n            dispatch({\n                type: 'CLEAR_ERROR'\n            });\n            try {\n                const updatedSession = await session.upgradeToRecording();\n                if (updatedSession) {\n                    dispatch({\n                        type: 'SET_SESSION',\n                        payload: updatedSession\n                    });\n                    console.log('✅ [useAppStateNew] 會話升級為錄音模式成功');\n                    toast({\n                        title: '升級成功',\n                        description: '會話已升級為錄音模式'\n                    });\n                }\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : '升級會話失敗';\n                dispatch({\n                    type: 'SET_ERROR',\n                    payload: errorMessage\n                });\n                console.error('❌ [useAppStateNew] 升級會話失敗:', err);\n                toast({\n                    title: '升級失敗',\n                    description: errorMessage,\n                    variant: 'destructive'\n                });\n            } finally{\n                dispatch({\n                    type: 'SET_LOADING',\n                    payload: false\n                });\n            }\n        }\n    }[\"useAppStateNew.useCallback[upgradeToRecording]\"], [\n        session,\n        toast,\n        dispatch\n    ]);\n    // 停止錄音\n    const stopRecording = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAppStateNew.useCallback[stopRecording]\": async ()=>{\n            dispatch({\n                type: 'SET_LOADING',\n                payload: true\n            });\n            dispatch({\n                type: 'CLEAR_ERROR'\n            });\n            try {\n                await recording.stopRecording();\n                transcript.disconnect();\n                // 觸發狀態轉換\n                transition('USER_STOP_RECORDING');\n                console.log('✅ [useAppStateNew] 錄音停止，開始處理逐字稿');\n                toast({\n                    title: '處理中',\n                    description: '正在處理錄音內容，請稍候...'\n                });\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : '停止錄音失敗';\n                dispatch({\n                    type: 'SET_ERROR',\n                    payload: errorMessage\n                });\n                console.error('❌ [useAppStateNew] 停止錄音失敗:', err);\n                toast({\n                    title: '停止失敗',\n                    description: errorMessage,\n                    variant: 'destructive'\n                });\n            } finally{\n                dispatch({\n                    type: 'SET_LOADING',\n                    payload: false\n                });\n            }\n        }\n    }[\"useAppStateNew.useCallback[stopRecording]\"], [\n        recording,\n        transcript,\n        toast,\n        dispatch,\n        transition\n    ]);\n    // 完成會話\n    const finishSession = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAppStateNew.useCallback[finishSession]\": async ()=>{\n            dispatch({\n                type: 'SET_LOADING',\n                payload: true\n            });\n            dispatch({\n                type: 'CLEAR_ERROR'\n            });\n            try {\n                await session.finishSession();\n                // 在這裡不需要觸發狀態轉換，因為 stopRecording 已經處理了\n                // dispatch({ type: 'SET_APP_STATE', payload: 'finished' })\n                console.log('✅ [useAppStateNew] 會話完成');\n                toast({\n                    title: '會話完成',\n                    description: '您可以匯出筆記或開始新的筆記'\n                });\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : '完成會話失敗';\n                dispatch({\n                    type: 'SET_ERROR',\n                    payload: errorMessage\n                });\n                console.error('❌ [useAppStateNew] 完成會話失敗:', err);\n                toast({\n                    title: '完成失敗',\n                    description: errorMessage,\n                    variant: 'destructive'\n                });\n            } finally{\n                dispatch({\n                    type: 'SET_LOADING',\n                    payload: false\n                });\n            }\n        }\n    }[\"useAppStateNew.useCallback[finishSession]\"], [\n        session,\n        toast,\n        dispatch\n    ]);\n    // 開新筆記\n    const newNote = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAppStateNew.useCallback[newNote]\": async ()=>{\n            dispatch({\n                type: 'SET_LOADING',\n                payload: true\n            });\n            dispatch({\n                type: 'CLEAR_ERROR'\n            });\n            try {\n                // 如果有活躍會話，先刪除它\n                if (session.currentSession) {\n                    console.log('🗑️ [useAppStateNew] 刪除當前活躍會話:', session.currentSession.id);\n                    await session.deleteSession();\n                }\n                // 觸發狀態轉換\n                transition('USER_NEW_NOTE');\n                // 重置所有狀態\n                dispatch({\n                    type: 'RESET_STATE'\n                });\n                // 清除相關狀態\n                recording.clearTranscripts();\n                transcript.clearTranscripts();\n                notes.clearNote();\n                // 清除本地草稿\n                localStorage.removeItem('draft_note');\n                console.log('🔄 [useAppStateNew] 已開始新筆記');\n                toast({\n                    title: '新筆記',\n                    description: '已清空內容，可以開始新的筆記'\n                });\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : '開始新筆記失敗';\n                dispatch({\n                    type: 'SET_ERROR',\n                    payload: errorMessage\n                });\n                console.error('❌ [useAppStateNew] 開始新筆記失敗:', err);\n                toast({\n                    title: '操作失敗',\n                    description: errorMessage,\n                    variant: 'destructive'\n                });\n            } finally{\n                dispatch({\n                    type: 'SET_LOADING',\n                    payload: false\n                });\n            }\n        }\n    }[\"useAppStateNew.useCallback[newNote]\"], [\n        session,\n        recording,\n        transcript,\n        notes,\n        toast,\n        dispatch,\n        transition\n    ]);\n    // 自動儲存筆記內容到本地草稿\n    const saveLocalDraft = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useAppStateNew.useCallback[saveLocalDraft]\": (content)=>{\n            if (!session.currentSession && content.trim()) {\n                localStorage.setItem('draft_note', content);\n            }\n            dispatch({\n                type: 'SET_EDITOR_CONTENT',\n                payload: content\n            });\n        }\n    }[\"useAppStateNew.useCallback[saveLocalDraft]\"], [\n        session.currentSession,\n        dispatch\n    ]);\n    // 使用 useCallback 來記憶函數\n    const createRecordingSessionCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(createRecordingSession, [\n        session,\n        notes,\n        toast,\n        dispatch,\n        appData.editorContent\n    ]);\n    const startRecordingCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(startRecording, [\n        session,\n        recording,\n        toast,\n        dispatch,\n        appData.editorContent,\n        transition\n    ]);\n    const stopRecordingCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(stopRecording, [\n        recording,\n        transcript,\n        toast,\n        dispatch,\n        transition\n    ]);\n    const finishSessionCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(finishSession, [\n        session,\n        toast,\n        dispatch\n    ]);\n    const connectTranscriptCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(transcript.connect, [\n        transcript\n    ]);\n    const disconnectTranscriptCallback = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(transcript.disconnect, [\n        transcript\n    ]);\n    return {\n        // 應用狀態（向後相容）\n        appData,\n        isLoading,\n        error,\n        // 會話管理\n        createNoteSession,\n        createRecordingSession,\n        upgradeToRecording,\n        finishSession,\n        newNote,\n        // 錄音控制\n        startRecording,\n        stopRecording,\n        // 本地草稿\n        saveLocalDraft,\n        // 外部狀態（向後相容）\n        session: session.currentSession,\n        sessionLoading: session.isLoading,\n        sessionError: session.error,\n        // 錄音狀態\n        recordingError: recording.error,\n        // 逐字稿狀態\n        transcriptConnected: transcript.isConnected,\n        transcriptError: transcript.error,\n        transcriptAutoScroll: transcript.autoScrollEnabled,\n        enableAutoScroll: transcript.enableAutoScroll,\n        disableAutoScroll: transcript.disableAutoScroll,\n        scrollToLatest: transcript.scrollToLatest\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZS1hcHAtc3RhdGUtbmV3LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7b0VBRWdFO0FBQ0o7QUFDVjtBQUNJO0FBQ2hCO0FBQ2tCO0FBQ0o7QUFFTztBQUUzRDs7OztDQUlDLEdBQ00sU0FBU1U7UUFZREM7SUFYYixNQUFNQyxVQUFVVCwwRUFBa0JBO0lBQ2xDLE1BQU0sRUFBRVEsT0FBTyxFQUFFRSxTQUFTLEVBQUVDLEtBQUssRUFBRUMsUUFBUSxFQUFFQyxVQUFVLEVBQUUsR0FBR0o7SUFDNUQsTUFBTUssVUFBVWIsZ0VBQVVBO0lBQzFCLE1BQU1jLFlBQVliLG9FQUFZQTtJQUM5QixNQUFNYyxRQUFRYixvREFBUUE7SUFDdEIsTUFBTWMsYUFBYWIsc0VBQWFBO0lBQ2hDLE1BQU0sRUFBRWMsS0FBSyxFQUFFLEdBQUdiLGtFQUFRQTtJQUUxQmMsUUFBUUMsR0FBRyxDQUFDLGlDQUFpQztRQUMzQ0MsY0FBY2IsUUFBUWMsS0FBSztRQUMzQkMsYUFBYWYsUUFBUWUsV0FBVztRQUNoQ0MsU0FBUyxHQUFFaEIsbUJBQUFBLFFBQVFNLE9BQU8sY0FBZk4sdUNBQUFBLGlCQUFpQmlCLEVBQUU7UUFDOUJDLGlCQUFpQmxCLFFBQVFtQixpQkFBaUIsQ0FBQ0MsTUFBTTtJQUNuRDtJQUVBLE1BQU0sQ0FBQ0Msb0JBQW9CLEdBQUc5QiwrQ0FBUUE7bUNBQUM7WUFDckMsTUFBTStCLFlBQVksSUFBSXhCLG1FQUFtQkEsQ0FBQztnQkFDeENlLGNBQWNiLFFBQVFjLEtBQUs7Z0JBQzNCQyxhQUFhZixRQUFRZSxXQUFXO2dCQUNoQ0csaUJBQWlCbEIsUUFBUW1CLGlCQUFpQixDQUFDQyxNQUFNO2dCQUNqRGQsU0FBU04sUUFBUU0sT0FBTyxJQUFJO2dCQUM1QkgsT0FBT0E7WUFDVDtZQUVBLGFBQWE7WUFDYm1CLFVBQVVDLHlCQUF5QixDQUFDLGtCQUFrQjtnQkFDcERDLGdCQUFnQjsrQ0FBRSxPQUFPQzt3QkFDdkJk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IjpbIi9Vc2Vycy9pdHN1a2kvRG9jdW1lbnRzL0dpdC9zdHVkeS1zY3JpYmVyL2Zyb250ZW5kL2hvb2tzL3VzZS1hcHAtc3RhdGUtbmV3LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiXG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIlxuaW1wb3J0IHsgdXNlQXBwU3RhdGVDb250ZXh0IH0gZnJvbSBcIi4vdXNlLWFwcC1zdGF0ZS1jb250ZXh0XCJcbmltcG9ydCB7IHVzZVNlc3Npb24gfSBmcm9tIFwiLi91c2Utc2Vzc2lvbi1hZGFwdGVyXCJcbmltcG9ydCB7IHVzZVJlY29yZGluZyB9IGZyb20gXCIuL3VzZS1yZWNvcmRpbmctYWRhcHRlclwiXG5pbXBvcnQgeyB1c2VOb3RlcyB9IGZyb20gXCIuL3VzZS1ub3Rlc1wiXG5pbXBvcnQgeyB1c2VUcmFuc2NyaXB0IH0gZnJvbSBcIi4vdXNlLXRyYW5zY3JpcHQtYWRhcHRlclwiXG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvdXNlLXRvYXN0XCJcbmltcG9ydCB0eXBlIHsgQXBwRGF0YSB9IGZyb20gXCIuLi90eXBlcy9hcHAtc3RhdGVcIlxuaW1wb3J0IHsgU3RhdGVNYWNoaW5lTWFuYWdlciB9IGZyb20gJy4uL2xpYi9zdGF0ZS1tYWNoaW5lJztcblxuLyoqXG4gKiDmlrDniYjmnKznmoQgdXNlQXBwU3RhdGUgSG9va1xuICog5L2/55SoIENvbnRleHQg54uA5oWL566h55CG77yM5aSn5bmF57Ch5YyW5Y6f5pysIDg2OCDooYznmoTopIfpm5zpgo/ovK9cbiAqIOWwh+eLgOaFi+euoeeQhuWnlOiol+e1piBBcHBTdGF0ZUNvbnRleHTvvIxIb29rIOWPquiyoOiyrOalreWLmemCj+i8r1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlQXBwU3RhdGVOZXcoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VBcHBTdGF0ZUNvbnRleHQoKVxuICBjb25zdCB7IGFwcERhdGEsIGlzTG9hZGluZywgZXJyb3IsIGRpc3BhdGNoLCB0cmFuc2l0aW9uIH0gPSBjb250ZXh0XG4gIGNvbnN0IHNlc3Npb24gPSB1c2VTZXNzaW9uKClcbiAgY29uc3QgcmVjb3JkaW5nID0gdXNlUmVjb3JkaW5nKClcbiAgY29uc3Qgbm90ZXMgPSB1c2VOb3RlcygpXG4gIGNvbnN0IHRyYW5zY3JpcHQgPSB1c2VUcmFuc2NyaXB0KClcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKVxuXG4gIGNvbnNvbGUubG9nKCfwn5SEIFt1c2VBcHBTdGF0ZU5ld10gSG9vayDliJ3lp4vljJY6Jywge1xuICAgIGN1cnJlbnRTdGF0ZTogYXBwRGF0YS5zdGF0ZSxcbiAgICBpc1JlY29yZGluZzogYXBwRGF0YS5pc1JlY29yZGluZyxcbiAgICBzZXNzaW9uSWQ6IGFwcERhdGEuc2Vzc2lvbj8uaWQsXG4gICAgdHJhbnNjcmlwdENvdW50OiBhcHBEYXRhLnRyYW5zY3JpcHRFbnRyaWVzLmxlbmd0aFxuICB9KVxuXG4gIGNvbnN0IFtzdGF0ZU1hY2hpbmVNYW5hZ2VyXSA9IHVzZVN0YXRlKCgpID0+IHtcbiAgICBjb25zdCBzbU1hbmFnZXIgPSBuZXcgU3RhdGVNYWNoaW5lTWFuYWdlcih7XG4gICAgICBjdXJyZW50U3RhdGU6IGFwcERhdGEuc3RhdGUsXG4gICAgICBpc1JlY29yZGluZzogYXBwRGF0YS5pc1JlY29yZGluZyxcbiAgICAgIHRyYW5zY3JpcHRDb3VudDogYXBwRGF0YS50cmFuc2NyaXB0RW50cmllcy5sZW5ndGgsXG4gICAgICBzZXNzaW9uOiBhcHBEYXRhLnNlc3Npb24gfHwgbnVsbCxcbiAgICAgIGVycm9yOiBlcnJvcixcbiAgICB9KTtcblxuICAgIC8vIOeri+WNs+iou+WGiuWJr+S9nOeUqOiZleeQhuWZqFxuICAgIHNtTWFuYWdlci5yZWdpc3RlclNpZGVFZmZlY3RIYW5kbGVyKCdDUkVBVEVfU0VTU0lPTicsIHtcbiAgICAgIGhhbmRsZVNpZGVFZmZlY3Q6IGFzeW5jIChlZmZlY3QpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfj5fvuI8gW+WJr+S9nOeUqF0gQ1JFQVRFX1NFU1NJT046IOW7uueri+acg+ipsScsIGVmZmVjdCk7XG4gICAgICAgIC8vIOmAmeijoemcgOimgeWCs+WFpeaomemhjO+8jOaIkeWAkeWPr+S7peW+nuafkOWAi+WcsOaWueeNsuWPluaIluS9v+eUqOmgkOioreWAvFxuICAgICAgICBjb25zdCB0aXRsZSA9ICdOZXcgUmVjb3JkaW5nJzsgLy8g6aCQ6Kit5qiZ6aGM77yM5LmL5b6M5Y+v5Lul5pS56YCyXG4gICAgICAgIGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBzZXNzaW9uLmNyZWF0ZVJlY29yZGluZ1Nlc3Npb24odGl0bGUsIGFwcERhdGEuZWRpdG9yQ29udGVudCk7XG4gICAgICAgIGlmIChuZXdTZXNzaW9uKSB7XG4gICAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1NFU1NJT04nLCBwYXlsb2FkOiBuZXdTZXNzaW9uIH0pO1xuICAgICAgICAgIC8vIOabtOaWsOeLgOaFi+apn+S4iuS4i+aWh1xuICAgICAgICAgIHNtTWFuYWdlci5nZXRTdGF0ZU1hY2hpbmUoKS51cGRhdGVDb250ZXh0KHtcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZTogYXBwRGF0YS5zdGF0ZSxcbiAgICAgICAgICAgIGlzUmVjb3JkaW5nOiBhcHBEYXRhLmlzUmVjb3JkaW5nLFxuICAgICAgICAgICAgdHJhbnNjcmlwdENvdW50OiBhcHBEYXRhLnRyYW5zY3JpcHRFbnRyaWVzLmxlbmd0aCxcbiAgICAgICAgICAgIHNlc3Npb246IG5ld1Nlc3Npb24sXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2RyYWZ0X25vdGUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+eEoeazleW7uueri+mMhOmfs+acg+ipsScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgc21NYW5hZ2VyLnJlZ2lzdGVyU2lkZUVmZmVjdEhhbmRsZXIoJ1NUQVJUX1JFQ09SRElORycsIHtcbiAgICAgIGhhbmRsZVNpZGVFZmZlY3Q6IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8g5b6e54uA5oWL5qmf5LiK5LiL5paH542y5Y+W5pyA5paw55qEIHNlc3Npb24g6LOH6KiKXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBzbU1hbmFnZXIuZ2V0U3RhdGVNYWNoaW5lKCkuZ2V0Q29udGV4dCgpO1xuICAgICAgICBpZiAoY29udGV4dC5zZXNzaW9uPy5pZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn46kIFvlia/kvZznlKhdIFNUQVJUX1JFQ09SRElORzog6ZaL5aeL6YyE6Z+zJywgY29udGV4dC5zZXNzaW9uLmlkKTtcbiAgICAgICAgICBhd2FpdCByZWNvcmRpbmcuc3RhcnRSZWNvcmRpbmcoY29udGV4dC5zZXNzaW9uLmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfwn46kIFvlia/kvZznlKhdIFNUQVJUX1JFQ09SRElORzog5rKS5pyJ5Y+v55So55qEIHNlc3Npb24nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHNtTWFuYWdlci5yZWdpc3RlclNpZGVFZmZlY3RIYW5kbGVyKCdTVE9QX1JFQ09SRElORycsIHtcbiAgICAgIGhhbmRsZVNpZGVFZmZlY3Q6IGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgc3RvcFJlY29yZGluZygpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHNtTWFuYWdlci5yZWdpc3RlclNpZGVFZmZlY3RIYW5kbGVyKCdDT05ORUNUX1dFQlNPQ0tFVCcsIHtcbiAgICAgIGhhbmRsZVNpZGVFZmZlY3Q6IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8g5b6e54uA5oWL5qmf5LiK5LiL5paH542y5Y+W5pyA5paw55qEIHNlc3Npb24g6LOH6KiKXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBzbU1hbmFnZXIuZ2V0U3RhdGVNYWNoaW5lKCkuZ2V0Q29udGV4dCgpO1xuICAgICAgICBpZiAoY29udGV4dC5zZXNzaW9uPy5pZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SMIFvlia/kvZznlKhdIENPTk5FQ1RfV0VCU09DS0VUOiDpgKPmjqUgV2ViU29ja2V0JywgY29udGV4dC5zZXNzaW9uLmlkKTtcbiAgICAgICAgICBhd2FpdCB0cmFuc2NyaXB0LmNvbm5lY3QoY29udGV4dC5zZXNzaW9uLmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfwn5SMIFvlia/kvZznlKhdIENPTk5FQ1RfV0VCU09DS0VUOiDmspLmnInlj6/nlKjnmoQgc2Vzc2lvbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgc21NYW5hZ2VyLnJlZ2lzdGVyU2lkZUVmZmVjdEhhbmRsZXIoJ0RJU0NPTk5FQ1RfV0VCU09DS0VUJywge1xuICAgICAgaGFuZGxlU2lkZUVmZmVjdDogKCkgPT4ge1xuICAgICAgICB0cmFuc2NyaXB0LmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzbU1hbmFnZXIucmVnaXN0ZXJTaWRlRWZmZWN0SGFuZGxlcignRklOSVNIX1NFU1NJT04nLCB7XG4gICAgICBoYW5kbGVTaWRlRWZmZWN0OiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGZpbmlzaFNlc3Npb24oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBzbU1hbmFnZXI7XG4gIH0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc3RhdGVNYWNoaW5lTWFuYWdlci5nZXRTdGF0ZU1hY2hpbmUoKS51cGRhdGVDb250ZXh0KHtcbiAgICAgIGN1cnJlbnRTdGF0ZTogYXBwRGF0YS5zdGF0ZSxcbiAgICAgIGlzUmVjb3JkaW5nOiBhcHBEYXRhLmlzUmVjb3JkaW5nLFxuICAgICAgdHJhbnNjcmlwdENvdW50OiBhcHBEYXRhLnRyYW5zY3JpcHRFbnRyaWVzLmxlbmd0aCxcbiAgICAgIHNlc3Npb246IGFwcERhdGEuc2Vzc2lvbixcbiAgICAgIGVycm9yOiBlcnJvcixcbiAgICB9KTtcbiAgfSwgW2FwcERhdGEsIGVycm9yLCBzdGF0ZU1hY2hpbmVNYW5hZ2VyXSk7XG5cbiAgLy8g5bu656uL57SU562G6KiY5pyD6KmxXG4gIGNvbnN0IGNyZWF0ZU5vdGVTZXNzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRpdGxlOiBzdHJpbmcpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfTE9BRElORycsIHBheWxvYWQ6IHRydWUgfSlcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdDTEVBUl9FUlJPUicgfSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdTZXNzaW9uID0gYXdhaXQgc2Vzc2lvbi5jcmVhdGVOb3RlU2Vzc2lvbih0aXRsZSlcbiAgICAgIGlmIChuZXdTZXNzaW9uKSB7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9TRVNTSU9OJywgcGF5bG9hZDogbmV3U2Vzc2lvbiB9KVxuXG4gICAgICAgIC8vIOi8ieWFpeethuiomOWFp+WuuVxuICAgICAgICBhd2FpdCBub3Rlcy5sb2FkTm90ZShuZXdTZXNzaW9uLmlkKVxuXG4gICAgICAgIC8vIOa4hemZpOacrOWcsOiNieeov1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZHJhZnRfbm90ZScpXG5cbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBbdXNlQXBwU3RhdGVOZXddIOe0lOethuiomOacg+ipseW7uueri+aIkOWKnycpXG5cbiAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiAn562G6KiY5pyD6Kmx5bey5bu656uLJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYOacg+ipsSBcIiR7dGl0bGV9XCIg5bu656uL5oiQ5YqfYCxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAn5bu656uL562G6KiY5pyD6Kmx5aSx5pWXJ1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0VSUk9SJywgcGF5bG9hZDogZXJyb3JNZXNzYWdlIH0pXG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbdXNlQXBwU3RhdGVOZXddIOW7uueri+ethuiomOacg+ipseWkseaVlzonLCBlcnIpXG5cbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICflu7rnq4vlpLHmlZcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xPQURJTkcnLCBwYXlsb2FkOiBmYWxzZSB9KVxuICAgIH1cbiAgfSwgW3Nlc3Npb24sIG5vdGVzLCB0b2FzdCwgZGlzcGF0Y2hdKVxuXG4gIC8vIOW7uueri+mMhOmfs+acg+ipsVxuICBjb25zdCBjcmVhdGVSZWNvcmRpbmdTZXNzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRpdGxlOiBzdHJpbmcpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfTE9BRElORycsIHBheWxvYWQ6IHRydWUgfSlcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdDTEVBUl9FUlJPUicgfSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdTZXNzaW9uID0gYXdhaXQgc2Vzc2lvbi5jcmVhdGVSZWNvcmRpbmdTZXNzaW9uKHRpdGxlLCBhcHBEYXRhLmVkaXRvckNvbnRlbnQpXG4gICAgICBpZiAobmV3U2Vzc2lvbikge1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfU0VTU0lPTicsIHBheWxvYWQ6IG5ld1Nlc3Npb24gfSlcblxuICAgICAgICAvLyDovInlhaXnrYboqJjlhaflrrlcbiAgICAgICAgYXdhaXQgbm90ZXMubG9hZE5vdGUobmV3U2Vzc2lvbi5pZClcblxuICAgICAgICAvLyDmuIXpmaTmnKzlnLDojYnnqL9cbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2RyYWZ0X25vdGUnKVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgW3VzZUFwcFN0YXRlTmV3XSDpjITpn7PmnIPoqbHlu7rnq4vmiJDlip8nKVxuXG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB0aXRsZTogJ+mMhOmfs+acg+ipseW3suW7uueriycsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGDmnIPoqbEgXCIke3RpdGxlfVwiIOW7uueri+aIkOWKn2AsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyDnibnliKXomZXnkIbmnIPoqbHooZ3nqoHpjK/oqqRcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnIubWVzc2FnZS5pbmNsdWRlcygn5qqi5ris5Yiw5rS76LqN5pyD6Kmx6KGd56qBJykpIHtcbiAgICAgICAgY29uc3QgY29uZmxpY3RNc2cgPSAn5YG15ris5Yiw5pyD6Kmx6KGd56qB77yM6KuL6YeN5paw5pW055CG6aCB6Z2i5b6M5YaN6KmmJ1xuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfRVJST1InLCBwYXlsb2FkOiBjb25mbGljdE1zZyB9KVxuXG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB0aXRsZTogJ+acg+ipseihneeqgScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICfnm67liY3lt7LmnInmtLvouo3mnIPoqbHvvIzoq4vph43mlrDmlbTnkIbpoIHpnaLlvozlho3oqabvvIzmiJbnrYnlvoXnlbbliY3mnIPoqbHntZDmnZ8nLFxuICAgICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZSdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAn5bu656uL6YyE6Z+z5pyD6Kmx5aSx5pWXJ1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0VSUk9SJywgcGF5bG9hZDogZXJyb3JNZXNzYWdlIH0pXG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbdXNlQXBwU3RhdGVOZXddIOW7uueri+mMhOmfs+acg+ipseWkseaVlzonLCBlcnIpXG5cbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICflu7rnq4vlpLHmlZcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xPQURJTkcnLCBwYXlsb2FkOiBmYWxzZSB9KVxuICAgIH1cbiAgfSwgW3Nlc3Npb24sIG5vdGVzLCB0b2FzdCwgZGlzcGF0Y2gsIGFwcERhdGEuZWRpdG9yQ29udGVudF0pXG5cbiAgLy8g6ZaL5aeL6YyE6Z+zXG4gIGNvbnN0IHN0YXJ0UmVjb3JkaW5nID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRpdGxlOiBzdHJpbmcpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIvCfjqQgW3VzZUFwcFN0YXRlTmV3XSBzdGFydFJlY29yZGluZzog5rWB56iL6ZaL5aeLXCIpXG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xPQURJTkcnLCBwYXlsb2FkOiB0cnVlIH0pXG5cbiAgICB0cnkge1xuICAgICAgLy8g5qqi5p+l5rS76LqN5pyD6Kmx54uA5oWLXG4gICAgICBjb25zdCBsYXRlc3RBY3RpdmVTZXNzaW9uID0gYXdhaXQgc2Vzc2lvbi5jaGVja0FjdGl2ZVNlc3Npb24oKVxuICAgICAgbGV0IHNlc3Npb25Ub1JlY29yZCA9IGxhdGVzdEFjdGl2ZVNlc3Npb24gfHwgc2Vzc2lvbi5jdXJyZW50U2Vzc2lvblxuXG4gICAgICBjb25zb2xlLmxvZyhcIvCfjqQgW3VzZUFwcFN0YXRlTmV3XSDmnIPoqbHni4DmhYvmqqLmn6U6XCIsIHtcbiAgICAgICAgbGF0ZXN0QWN0aXZlU2Vzc2lvbjogbGF0ZXN0QWN0aXZlU2Vzc2lvbj8uaWQsXG4gICAgICAgIGN1cnJlbnRTZXNzaW9uOiBzZXNzaW9uLmN1cnJlbnRTZXNzaW9uPy5pZCxcbiAgICAgICAgZmluYWxTZXNzaW9uVG9Vc2U6IHNlc3Npb25Ub1JlY29yZD8uaWRcbiAgICAgIH0pXG5cbiAgICAgIGlmICghc2Vzc2lvblRvUmVjb3JkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+OpCBbdXNlQXBwU3RhdGVOZXddIOW7uueri+aWsOeahOmMhOmfsyBzZXNzaW9uXCIpXG4gICAgICAgIGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBzZXNzaW9uLmNyZWF0ZVJlY29yZGluZ1Nlc3Npb24odGl0bGUsIGFwcERhdGEuZWRpdG9yQ29udGVudClcbiAgICAgICAgaWYgKCFuZXdTZXNzaW9uKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfnhKHms5Xlu7rnq4vmlrDnmoTpjITpn7PmnIPoqbEnKVxuICAgICAgICB9XG4gICAgICAgIHNlc3Npb25Ub1JlY29yZCA9IG5ld1Nlc3Npb25cbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1NFU1NJT04nLCBwYXlsb2FkOiBuZXdTZXNzaW9uIH0pXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdkcmFmdF9ub3RlJylcbiAgICAgIH0gZWxzZSBpZiAoc2Vzc2lvblRvUmVjb3JkLnR5cGUgPT09ICdub3RlX29ubHknKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+OpCBbdXNlQXBwU3RhdGVOZXddIOWNh+e0miBub3RlX29ubHkgc2Vzc2lvblwiKVxuICAgICAgICBjb25zdCB1cGdyYWRlZFNlc3Npb24gPSBhd2FpdCBzZXNzaW9uLnVwZ3JhZGVUb1JlY29yZGluZygpXG4gICAgICAgIGlmICghdXBncmFkZWRTZXNzaW9uKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfnhKHms5XljYfntJrmnIPoqbEnKVxuICAgICAgICB9XG4gICAgICAgIHNlc3Npb25Ub1JlY29yZCA9IHVwZ3JhZGVkU2Vzc2lvblxuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfU0VTU0lPTicsIHBheWxvYWQ6IHVwZ3JhZGVkU2Vzc2lvbiB9KVxuICAgICAgfVxuXG4gICAgICAvLyDmm7TmlrDni4DmhYvmqZ/kuIrkuIvmlofvvIznorrkv50gc2Vzc2lvbiDos4foqIrmmK/mnIDmlrDnmoRcbiAgICAgIHN0YXRlTWFjaGluZU1hbmFnZXIuZ2V0U3RhdGVNYWNoaW5lKCkudXBkYXRlQ29udGV4dCh7XG4gICAgICAgIGN1cnJlbnRTdGF0ZTogYXBwRGF0YS5zdGF0ZSxcbiAgICAgICAgaXNSZWNvcmRpbmc6IGFwcERhdGEuaXNSZWNvcmRpbmcsXG4gICAgICAgIHRyYW5zY3JpcHRDb3VudDogYXBwRGF0YS50cmFuc2NyaXB0RW50cmllcy5sZW5ndGgsXG4gICAgICAgIHNlc3Npb246IHNlc3Npb25Ub1JlY29yZCxcbiAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIOinuOeZvOeLgOaFi+i9ieaPmyAtIOiuk+eLgOaFi+apn+iZleeQhumMhOmfs+WSjCBXZWJTb2NrZXQg6YCj5o6lXG4gICAgICBjb25zdCByZXN1bHQgPSB0cmFuc2l0aW9uKCdVU0VSX1NUQVJUX1JFQ09SRElORycpO1xuXG4gICAgICBpZiAoIXJlc3VsdD8uc3VjY2Vzcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0Py5lcnJvciB8fCAn54uA5oWL6L2J5o+b5aSx5pWXJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKFwi8J+OpCBbdXNlQXBwU3RhdGVOZXddIOmMhOmfs+mWi+Wni+aIkOWKn1wiKVxuICAgICAgdG9hc3QoeyB0aXRsZTogJ+mMhOmfs+mWi+WniycgfSlcblxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8g6JmV55CG5pyD6Kmx6KGd56qB6Yyv6KqkXG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ+aqoua4rOWIsOa0u+i6jeacg+ipseihneeqgScpKSB7XG4gICAgICAgIGNvbnN0IGNvbmZsaWN0TXNnID0gJ+WBtea4rOWIsOacg+ipseihneeqge+8jOiri+mHjeaWsOaVtOeQhumggemdouW+jOWGjeippidcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0VSUk9SJywgcGF5bG9hZDogY29uZmxpY3RNc2cgfSlcblxuICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgdGl0bGU6ICfmnIPoqbHooZ3nqoEnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn55uu5YmN5bey5pyJ5rS76LqN5pyD6Kmx77yM6KuL6YeN5paw5pW055CG6aCB6Z2i5b6M5YaN6Kmm77yM5oiW562J5b6F55W25YmN5pyD6Kmx57WQ5p2fJyxcbiAgICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBtc2cgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ+mWi+Wni+mMhOmfs+WkseaVlydcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9FUlJPUicsIHBheWxvYWQ6IG1zZyB9KVxuXG4gICAgICBjb25zb2xlLmVycm9yKFwi8J+OpCBbdXNlQXBwU3RhdGVOZXddIOmMhOmfs+WkseaVlzpcIiwgbXNnKVxuICAgICAgdG9hc3QoeyB0aXRsZTogJ+mMhOmfs+WkseaVlycsIGRlc2NyaXB0aW9uOiBtc2csIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xPQURJTkcnLCBwYXlsb2FkOiBmYWxzZSB9KVxuICAgIH1cbiAgfSwgW3Nlc3Npb24sIHJlY29yZGluZywgdG9hc3QsIGRpc3BhdGNoLCBhcHBEYXRhLmVkaXRvckNvbnRlbnQsIHRyYW5zaXRpb24sIHN0YXRlTWFjaGluZU1hbmFnZXIsIGFwcERhdGEuc3RhdGUsIGFwcERhdGEuaXNSZWNvcmRpbmcsIGFwcERhdGEudHJhbnNjcmlwdEVudHJpZXMsIGVycm9yXSlcblxuICAvLyDljYfntJrmnIPoqbHngrrpjITpn7PmqKHlvI9cbiAgY29uc3QgdXBncmFkZVRvUmVjb3JkaW5nID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9MT0FESU5HJywgcGF5bG9hZDogdHJ1ZSB9KVxuICAgIGRpc3BhdGNoKHsgdHlwZTogJ0NMRUFSX0VSUk9SJyB9KVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRTZXNzaW9uID0gYXdhaXQgc2Vzc2lvbi51cGdyYWRlVG9SZWNvcmRpbmcoKVxuICAgICAgaWYgKHVwZGF0ZWRTZXNzaW9uKSB7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9TRVNTSU9OJywgcGF5bG9hZDogdXBkYXRlZFNlc3Npb24gfSlcblxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFt1c2VBcHBTdGF0ZU5ld10g5pyD6Kmx5Y2H57Sa54K66YyE6Z+z5qih5byP5oiQ5YqfJylcblxuICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgdGl0bGU6ICfljYfntJrmiJDlip8nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5pyD6Kmx5bey5Y2H57Sa54K66YyE6Z+z5qih5byPJyxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAn5Y2H57Sa5pyD6Kmx5aSx5pWXJ1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0VSUk9SJywgcGF5bG9hZDogZXJyb3JNZXNzYWdlIH0pXG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbdXNlQXBwU3RhdGVOZXddIOWNh+e0muacg+ipseWkseaVlzonLCBlcnIpXG5cbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICfljYfntJrlpLHmlZcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xPQURJTkcnLCBwYXlsb2FkOiBmYWxzZSB9KVxuICAgIH1cbiAgfSwgW3Nlc3Npb24sIHRvYXN0LCBkaXNwYXRjaF0pXG5cbiAgLy8g5YGc5q2i6YyE6Z+zXG4gIGNvbnN0IHN0b3BSZWNvcmRpbmcgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xPQURJTkcnLCBwYXlsb2FkOiB0cnVlIH0pXG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnQ0xFQVJfRVJST1InIH0pXG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgcmVjb3JkaW5nLnN0b3BSZWNvcmRpbmcoKVxuICAgICAgdHJhbnNjcmlwdC5kaXNjb25uZWN0KClcblxuICAgICAgLy8g6Ke455m854uA5oWL6L2J5o+bXG4gICAgICB0cmFuc2l0aW9uKCdVU0VSX1NUT1BfUkVDT1JESU5HJyk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgW3VzZUFwcFN0YXRlTmV3XSDpjITpn7PlgZzmraLvvIzplovlp4vomZXnkIbpgJDlrZfnqL8nKVxuXG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAn6JmV55CG5LitJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICfmraPlnKjomZXnkIbpjITpn7PlhaflrrnvvIzoq4vnqI3lgJkuLi4nLFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAn5YGc5q2i6YyE6Z+z5aSx5pWXJ1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0VSUk9SJywgcGF5bG9hZDogZXJyb3JNZXNzYWdlIH0pXG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbdXNlQXBwU3RhdGVOZXddIOWBnOatoumMhOmfs+WkseaVlzonLCBlcnIpXG5cbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICflgZzmraLlpLHmlZcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX0xPQURJTkcnLCBwYXlsb2FkOiBmYWxzZSB9KVxuICAgIH1cbiAgfSwgW3JlY29yZGluZywgdHJhbnNjcmlwdCwgdG9hc3QsIGRpc3BhdGNoLCB0cmFuc2l0aW9uXSlcblxuICAvLyDlrozmiJDmnIPoqbFcbiAgY29uc3QgZmluaXNoU2Vzc2lvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfTE9BRElORycsIHBheWxvYWQ6IHRydWUgfSlcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdDTEVBUl9FUlJPUicgfSlcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzZXNzaW9uLmZpbmlzaFNlc3Npb24oKVxuICAgICAgLy8g5Zyo6YCZ6KOh5LiN6ZyA6KaB6Ke455m854uA5oWL6L2J5o+b77yM5Zug54K6IHN0b3BSZWNvcmRpbmcg5bey57aT6JmV55CG5LqGXG4gICAgICAvLyBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfQVBQX1NUQVRFJywgcGF5bG9hZDogJ2ZpbmlzaGVkJyB9KVxuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFt1c2VBcHBTdGF0ZU5ld10g5pyD6Kmx5a6M5oiQJylcblxuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ+acg+ipseWujOaIkCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn5oKo5Y+v5Lul5Yyv5Ye6562G6KiY5oiW6ZaL5aeL5paw55qE562G6KiYJyxcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ+WujOaIkOacg+ipseWkseaVlydcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9FUlJPUicsIHBheWxvYWQ6IGVycm9yTWVzc2FnZSB9KVxuXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW3VzZUFwcFN0YXRlTmV3XSDlrozmiJDmnIPoqbHlpLHmlZc6JywgZXJyKVxuXG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAn5a6M5oiQ5aSx5pWXJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yTWVzc2FnZSxcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgIH0pXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9MT0FESU5HJywgcGF5bG9hZDogZmFsc2UgfSlcbiAgICB9XG4gIH0sIFtzZXNzaW9uLCB0b2FzdCwgZGlzcGF0Y2hdKVxuXG4gIC8vIOmWi+aWsOethuiomFxuICBjb25zdCBuZXdOb3RlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9MT0FESU5HJywgcGF5bG9hZDogdHJ1ZSB9KVxuICAgIGRpc3BhdGNoKHsgdHlwZTogJ0NMRUFSX0VSUk9SJyB9KVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOWmguaenOaciea0u+i6jeacg+ipse+8jOWFiOWIqumZpOWug1xuICAgICAgaWYgKHNlc3Npb24uY3VycmVudFNlc3Npb24pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gW3VzZUFwcFN0YXRlTmV3XSDliKrpmaTnlbbliY3mtLvouo3mnIPoqbE6Jywgc2Vzc2lvbi5jdXJyZW50U2Vzc2lvbi5pZClcbiAgICAgICAgYXdhaXQgc2Vzc2lvbi5kZWxldGVTZXNzaW9uKClcbiAgICAgIH1cblxuICAgICAgLy8g6Ke455m854uA5oWL6L2J5o+bXG4gICAgICB0cmFuc2l0aW9uKCdVU0VSX05FV19OT1RFJyk7XG5cbiAgICAgIC8vIOmHjee9ruaJgOacieeLgOaFi1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnUkVTRVRfU1RBVEUnIH0pXG5cbiAgICAgIC8vIOa4hemZpOebuOmXnOeLgOaFi1xuICAgICAgcmVjb3JkaW5nLmNsZWFyVHJhbnNjcmlwdHMoKVxuICAgICAgdHJhbnNjcmlwdC5jbGVhclRyYW5zY3JpcHRzKClcbiAgICAgIG5vdGVzLmNsZWFyTm90ZSgpXG5cbiAgICAgIC8vIOa4hemZpOacrOWcsOiNieeov1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2RyYWZ0X25vdGUnKVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBbdXNlQXBwU3RhdGVOZXddIOW3sumWi+Wni+aWsOethuiomCcpXG5cbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICfmlrDnrYboqJgnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ+W3sua4heepuuWFp+Wuue+8jOWPr+S7pemWi+Wni+aWsOeahOethuiomCcsXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICfplovlp4vmlrDnrYboqJjlpLHmlZcnXG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfRVJST1InLCBwYXlsb2FkOiBlcnJvck1lc3NhZ2UgfSlcblxuICAgICAgY29uc29sZS5lcnJvcign4p2MIFt1c2VBcHBTdGF0ZU5ld10g6ZaL5aeL5paw562G6KiY5aSx5pWXOicsIGVycilcblxuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogJ+aTjeS9nOWkseaVlycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICB9KVxuICAgIH0gZmluYWxseSB7XG4gICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfTE9BRElORycsIHBheWxvYWQ6IGZhbHNlIH0pXG4gICAgfVxuICB9LCBbc2Vzc2lvbiwgcmVjb3JkaW5nLCB0cmFuc2NyaXB0LCBub3RlcywgdG9hc3QsIGRpc3BhdGNoLCB0cmFuc2l0aW9uXSlcblxuICAvLyDoh6rli5XlhLLlrZjnrYboqJjlhaflrrnliLDmnKzlnLDojYnnqL9cbiAgY29uc3Qgc2F2ZUxvY2FsRHJhZnQgPSB1c2VDYWxsYmFjaygoY29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzZXNzaW9uLmN1cnJlbnRTZXNzaW9uICYmIGNvbnRlbnQudHJpbSgpKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZHJhZnRfbm90ZScsIGNvbnRlbnQpXG4gICAgfVxuICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9FRElUT1JfQ09OVEVOVCcsIHBheWxvYWQ6IGNvbnRlbnQgfSlcbiAgfSwgW3Nlc3Npb24uY3VycmVudFNlc3Npb24sIGRpc3BhdGNoXSlcblxuICAvLyDkvb/nlKggdXNlQ2FsbGJhY2sg5L6G6KiY5oa25Ye95pW4XG4gIGNvbnN0IGNyZWF0ZVJlY29yZGluZ1Nlc3Npb25DYWxsYmFjayA9IHVzZUNhbGxiYWNrKGNyZWF0ZVJlY29yZGluZ1Nlc3Npb24sIFtzZXNzaW9uLCBub3RlcywgdG9hc3QsIGRpc3BhdGNoLCBhcHBEYXRhLmVkaXRvckNvbnRlbnRdKTtcbiAgY29uc3Qgc3RhcnRSZWNvcmRpbmdDYWxsYmFjayA9IHVzZUNhbGxiYWNrKHN0YXJ0UmVjb3JkaW5nLCBbc2Vzc2lvbiwgcmVjb3JkaW5nLCB0b2FzdCwgZGlzcGF0Y2gsIGFwcERhdGEuZWRpdG9yQ29udGVudCwgdHJhbnNpdGlvbl0pO1xuICBjb25zdCBzdG9wUmVjb3JkaW5nQ2FsbGJhY2sgPSB1c2VDYWxsYmFjayhzdG9wUmVjb3JkaW5nLCBbcmVjb3JkaW5nLCB0cmFuc2NyaXB0LCB0b2FzdCwgZGlzcGF0Y2gsIHRyYW5zaXRpb25dKTtcbiAgY29uc3QgZmluaXNoU2Vzc2lvbkNhbGxiYWNrID0gdXNlQ2FsbGJhY2soZmluaXNoU2Vzc2lvbiwgW3Nlc3Npb24sIHRvYXN0LCBkaXNwYXRjaF0pO1xuICBjb25zdCBjb25uZWN0VHJhbnNjcmlwdENhbGxiYWNrID0gdXNlQ2FsbGJhY2sodHJhbnNjcmlwdC5jb25uZWN0LCBbdHJhbnNjcmlwdF0pO1xuICBjb25zdCBkaXNjb25uZWN0VHJhbnNjcmlwdENhbGxiYWNrID0gdXNlQ2FsbGJhY2sodHJhbnNjcmlwdC5kaXNjb25uZWN0LCBbdHJhbnNjcmlwdF0pO1xuXG4gIHJldHVybiB7XG4gICAgLy8g5oeJ55So54uA5oWL77yI5ZCR5b6M55u45a6577yJXG4gICAgYXBwRGF0YSxcbiAgICBpc0xvYWRpbmcsXG4gICAgZXJyb3IsXG5cbiAgICAvLyDmnIPoqbHnrqHnkIZcbiAgICBjcmVhdGVOb3RlU2Vzc2lvbixcbiAgICBjcmVhdGVSZWNvcmRpbmdTZXNzaW9uLFxuICAgIHVwZ3JhZGVUb1JlY29yZGluZyxcbiAgICBmaW5pc2hTZXNzaW9uLFxuICAgIG5ld05vdGUsXG5cbiAgICAvLyDpjITpn7PmjqfliLZcbiAgICBzdGFydFJlY29yZGluZyxcbiAgICBzdG9wUmVjb3JkaW5nLFxuXG4gICAgLy8g5pys5Zyw6I2J56i/XG4gICAgc2F2ZUxvY2FsRHJhZnQsXG5cbiAgICAvLyDlpJbpg6jni4DmhYvvvIjlkJHlvoznm7jlrrnvvIlcbiAgICBzZXNzaW9uOiBzZXNzaW9uLmN1cnJlbnRTZXNzaW9uLFxuICAgIHNlc3Npb25Mb2FkaW5nOiBzZXNzaW9uLmlzTG9hZGluZyxcbiAgICBzZXNzaW9uRXJyb3I6IHNlc3Npb24uZXJyb3IsXG5cbiAgICAvLyDpjITpn7Pni4DmhYtcbiAgICByZWNvcmRpbmdFcnJvcjogcmVjb3JkaW5nLmVycm9yLFxuXG4gICAgLy8g6YCQ5a2X56i/54uA5oWLXG4gICAgdHJhbnNjcmlwdENvbm5lY3RlZDogdHJhbnNjcmlwdC5pc0Nvbm5lY3RlZCxcbiAgICB0cmFuc2NyaXB0RXJyb3I6IHRyYW5zY3JpcHQuZXJyb3IsXG4gICAgdHJhbnNjcmlwdEF1dG9TY3JvbGw6IHRyYW5zY3JpcHQuYXV0b1Njcm9sbEVuYWJsZWQsXG4gICAgZW5hYmxlQXV0b1Njcm9sbDogdHJhbnNjcmlwdC5lbmFibGVBdXRvU2Nyb2xsLFxuICAgIGRpc2FibGVBdXRvU2Nyb2xsOiB0cmFuc2NyaXB0LmRpc2FibGVBdXRvU2Nyb2xsLFxuICAgIHNjcm9sbFRvTGF0ZXN0OiB0cmFuc2NyaXB0LnNjcm9sbFRvTGF0ZXN0LFxuICB9XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZUFwcFN0YXRlQ29udGV4dCIsInVzZVNlc3Npb24iLCJ1c2VSZWNvcmRpbmciLCJ1c2VOb3RlcyIsInVzZVRyYW5zY3JpcHQiLCJ1c2VUb2FzdCIsIlN0YXRlTWFjaGluZU1hbmFnZXIiLCJ1c2VBcHBTdGF0ZU5ldyIsImFwcERhdGEiLCJjb250ZXh0IiwiaXNMb2FkaW5nIiwiZXJyb3IiLCJkaXNwYXRjaCIsInRyYW5zaXRpb24iLCJzZXNzaW9uIiwicmVjb3JkaW5nIiwibm90ZXMiLCJ0cmFuc2NyaXB0IiwidG9hc3QiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudFN0YXRlIiwic3RhdGUiLCJpc1JlY29yZGluZyIsInNlc3Npb25JZCIsImlkIiwidHJhbnNjcmlwdENvdW50IiwidHJhbnNjcmlwdEVudHJpZXMiLCJsZW5ndGgiLCJzdGF0ZU1hY2hpbmVNYW5hZ2VyIiwic21NYW5hZ2VyIiwicmVnaXN0ZXJTaWRlRWZmZWN0SGFuZGxlciIsImhhbmRsZVNpZGVFZmZlY3QiLCJlZmZlY3QiLCJ0aXRsZSIsIm5ld1Nlc3Npb24iLCJjcmVhdGVSZWNvcmRpbmdTZXNzaW9uIiwiZWRpdG9yQ29udGVudCIsInR5cGUiLCJwYXlsb2FkIiwiZ2V0U3RhdGVNYWNoaW5lIiwidXBkYXRlQ29udGV4dCIsImxvY2FsU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJFcnJvciIsImdldENvbnRleHQiLCJzdGFydFJlY29yZGluZyIsInN0b3BSZWNvcmRpbmciLCJjb25uZWN0IiwiZGlzY29ubmVjdCIsImZpbmlzaFNlc3Npb24iLCJjcmVhdGVOb3RlU2Vzc2lvbiIsImxvYWROb3RlIiwiZGVzY3JpcHRpb24iLCJlcnIiLCJlcnJvck1lc3NhZ2UiLCJtZXNzYWdlIiwidmFyaWFudCIsImluY2x1ZGVzIiwiY29uZmxpY3RNc2ciLCJsYXRlc3RBY3RpdmVTZXNzaW9uIiwiY2hlY2tBY3RpdmVTZXNzaW9uIiwic2Vzc2lvblRvUmVjb3JkIiwiY3VycmVudFNlc3Npb24iLCJmaW5hbFNlc3Npb25Ub1VzZSIsInVwZ3JhZGVkU2Vzc2lvbiIsInVwZ3JhZGVUb1JlY29yZGluZyIsInJlc3VsdCIsInN1Y2Nlc3MiLCJtc2ciLCJ1cGRhdGVkU2Vzc2lvbiIsIm5ld05vdGUiLCJkZWxldGVTZXNzaW9uIiwiY2xlYXJUcmFuc2NyaXB0cyIsImNsZWFyTm90ZSIsInNhdmVMb2NhbERyYWZ0IiwiY29udGVudCIsInRyaW0iLCJzZXRJdGVtIiwiY3JlYXRlUmVjb3JkaW5nU2Vzc2lvbkNhbGxiYWNrIiwic3RhcnRSZWNvcmRpbmdDYWxsYmFjayIsInN0b3BSZWNvcmRpbmdDYWxsYmFjayIsImZpbmlzaFNlc3Npb25DYWxsYmFjayIsImNvbm5lY3RUcmFuc2NyaXB0Q2FsbGJhY2siLCJkaXNjb25uZWN0VHJhbnNjcmlwdENhbGxiYWNrIiwic2Vzc2lvbkxvYWRpbmciLCJzZXNzaW9uRXJyb3IiLCJyZWNvcmRpbmdFcnJvciIsInRyYW5zY3JpcHRDb25uZWN0ZWQiLCJpc0Nvbm5lY3RlZCIsInRyYW5zY3JpcHRFcnJvciIsInRyYW5zY3JpcHRBdXRvU2Nyb2xsIiwiYXV0b1Njcm9sbEVuYWJsZWQiLCJlbmFibGVBdXRvU2Nyb2xsIiwiZGlzYWJsZUF1dG9TY3JvbGwiLCJzY3JvbGxUb0xhdGVzdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/use-app-state-new.ts\n"));

/***/ })

});